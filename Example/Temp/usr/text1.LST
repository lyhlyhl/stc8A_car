C51 COMPILER V9.53.0.0   TEXT1                                                             07/23/2020 04:52:41 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN text1.OBJ
COMPILER INVOKED BY: F:\MDK5\C51\BIN\C51.EXE text1.c LARGE OMF2 OPTIMIZE(2,SPEED) BROWSE INCDIR(..\hardware\delay;..\har
                    -dware\IIC;..\hardware\OLED;..\hardware\ADC;..\hardware\Mpu6050;..\hardware\KEY;..\hardware\LED;..\hardware\PWM;..\hardwa
                    -re\pca;..\hardware\timer;..\hardware\PID;..\hardware\CCD;..\hardware\UART;..\hardware\Motor) DEBUG TABS(3)

line level    source

   1          #include "common.h"
   2          #include "main.h"
   3          extern int mpu_gyro_x, mpu_gyro_y, mpu_gyro_z;
   4          extern int flag;
   5          extern struct P_pid pid_speed;
   6          extern unsigned long length;
   7          
   8          int uflag=0;
   9          
  10          int dat1, dat2,dat_set = 1;
  11          void main(void)
  12          {
  13   1            int i = 0,flag_1 = 0;
  14   1            float speed_L, speed_R,pwm_value = 50,pwm_init = 0;
  15   1            char test[20] = "abc";
  16   1            init_all();
  17   1            Pwm_set(pwm_init, pwm_init);
  18   1            while (1)
  19   1            {
  20   2                  
  21   2                  
  22   2                  if (uflag == 1)
  23   2                  {
  24   3                     spilt_str();
  25   3                     uflag =0;
  26   3                  }
  27   2      
  28   2                  //    if(tsl1401_finish_flag)
  29   2                  //    {
  30   2                  //       //发送图像到上位机
  31   2                  //       ccd_send_data(UART_1, ccd_data);
  32   2      
  33   2                  //       //采集完成标志位清除
  34   2                  //       tsl1401_finish_flag = 0;
  35   2                  //    }
  36   2                  
  37   2      //            a = dat_set - ((dat1+dat2)/2) ;
  38   2                  
  39   2      //            speed_L = GetCarSpeed(dat1);
  40   2      //            speed_R = GetCarSpeed(dat2);
  41   2      //            OLED_Show_float(0, 2, speed_L);
  42   2      //            OLED_Show_float(0, 3, speed_R);
  43   2      //            OLED_ShowNum(0, 4, dat_set,5);
  44   2      //            OLED_Show_float(0, 5, pwm_value);
  45   2      //            OLED_Show_float(0, 6 , pwm_init);
  46   2      //            OLED_ShowNum(0, 0, dat1, 5);
  47   2      //            OLED_ShowNum(0, 1, dat2, 5);
  48   2                  
  49   2      
  50   2                  
  51   2                  
  52   2      //            sprintf(test,"%.2f \r\n",angle);
  53   2      //            uart_putstr(test);
C51 COMPILER V9.53.0.0   TEXT1                                                             07/23/2020 04:52:41 PAGE 2   

  54   2                  
  55   2      //            pwm_value = PID_realize(a,pid_speed);
  56   2      //            pwm_init += pwm_value;
  57   2      //            Pwm_set(pwm_init,pwm_init);
  58   2                  // sprintf(test, "%d %d\r\n", dat1, dat2);
  59   2                  // uart_putstr(test);
  60   2      //            if (KEYScan(3) == 3)
  61   2      //            {
  62   2      //                  dat_set += 1;
  63   2      //                  flag_1 = 0;
  64   2      //            }
  65   2      //            else if (KEYScan(4) == 4)
  66   2      //            {
  67   2      //                  dat_set -= 1;
  68   2      //                  flag_1 = 0;
  69   2      //            }
  70   2      //            else if (KEYScan(2) == 2)
  71   2      //            {
  72   2      //                  flag_1 = 1;
  73   2      //            }
  74   2      //            if(flag_1 == 1)
  75   2      //            {
  76   2                    
  77   2      //            }
  78   2                  //mpu6050_get_accdata();
  79   2                  //mpu6050_get_gyro();
  80   2                  //sprintf(test,"%d %d %d",mpu_gyro_x,mpu_gyro_y,mpu_gyro_z);
  81   2                  //OLED_ShowString(0,3,test);
  82   2                  //Delay1ms(100);
  83   2                  //LED = 0;
  84   2                  //TR0 = 0;
  85   2            }
  86   1      }
*** WARNING C280 IN LINE 14 OF text1.c: 'speed_L': unreferenced local variable
*** WARNING C280 IN LINE 14 OF text1.c: 'speed_R': unreferenced local variable
  87          
  88          void init_all()
  89          {
  90   1            //    P_SW2 = 0x80;
  91   1            // XOSCCR = 0xc0;          // 启动外部晶振
  92   1            // while (!(XOSCCR & 1));  // 等待时钟稳定
  93   1            // CLKDIV = 0x00;          // 时钟不分频
  94   1            // CKSEL = 0x01;        // 选择外部晶振
  95   1            // P_SW2 = 0x00;
  96   1            EA = 0;
  97   1            OLED_Init();
  98   1            simiic_init();
  99   1            mpu6050_init();
 100   1            //pca_input_init();
 101   1         
 102   1            //speed_count_init();
 103   1      
 104   1            Timer_uart_init();
 105   1            Timer0_init();
 106   1            //ccd_init();
 107   1            pid_init();
 108   1            EA = 1;
 109   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    180    ----
C51 COMPILER V9.53.0.0   TEXT1                                                             07/23/2020 04:52:41 PAGE 3   

   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =      8      40
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
